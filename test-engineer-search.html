<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Engineer Search</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            margin-bottom: 20px;
        }
        .test-section {
            margin: 20px 0;
            padding: 15px;
            background: #f9f9f9;
            border-radius: 5px;
            border: 1px solid #ddd;
        }
        .test-title {
            font-weight: bold;
            color: #555;
            margin-bottom: 10px;
        }
        .test-result {
            padding: 10px;
            margin-top: 10px;
            border-radius: 4px;
        }
        .success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        .info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background: #0056b3;
        }
        .search-demo {
            margin: 20px 0;
            padding: 15px;
            background: #fff;
            border: 2px solid #007bff;
            border-radius: 8px;
        }
        .search-input {
            width: 300px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            margin-right: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1><i class="fas fa-search"></i> Engineer Search Test Page</h1>
        
        <div class="test-section">
            <div class="test-title">Test Status</div>
            <div id="test-status" class="test-result info">
                Click "Run Tests" to start testing the engineer search functionality
            </div>
        </div>

        <div class="search-demo">
            <h3>Search Demo</h3>
            <p>This simulates the engineer search functionality:</p>
            <input type="text" id="demo-search" class="search-input" placeholder="Search for engineers...">
            <button onclick="testSearch()">Search</button>
            <button onclick="clearSearch()">Clear</button>
            <div id="search-results" style="margin-top: 15px;"></div>
        </div>

        <div class="test-section">
            <button onclick="runTests()">Run All Tests</button>
            <button onclick="testEnterKey()">Test Enter Key</button>
            <button onclick="testAutoSearch()">Test Auto-Search</button>
            <button onclick="testClearButton()">Test Clear Button</button>
        </div>

        <div class="test-section">
            <div class="test-title">Test Results</div>
            <div id="test-results"></div>
        </div>
    </div>

    <script>
        // Sample engineer data for testing
        const sampleEngineers = [
            { id: 1, name: "John Doe", skills: "JavaScript, React, Node.js", experience: "5 years" },
            { id: 2, name: "Jane Smith", skills: "Python, Django, Machine Learning", experience: "3 years" },
            { id: 3, name: "Ahmed Hassan", skills: "Java, Spring Boot, Microservices", experience: "7 years" },
            { id: 4, name: "Sara Ahmed", skills: "React, TypeScript, GraphQL", experience: "4 years" },
            { id: 5, name: "Mike Johnson", skills: "DevOps, Kubernetes, AWS", experience: "6 years" }
        ];

        function testSearch() {
            const searchInput = document.getElementById('demo-search');
            const searchTerm = searchInput.value.toLowerCase().trim();
            const resultsDiv = document.getElementById('search-results');
            
            if (!searchTerm) {
                resultsDiv.innerHTML = '<p>Showing all engineers:</p>' + 
                    sampleEngineers.map(eng => `
                        <div style="padding: 10px; margin: 5px 0; background: #f0f0f0; border-radius: 4px;">
                            <strong>${eng.name}</strong><br>
                            Skills: ${eng.skills}<br>
                            Experience: ${eng.experience}
                        </div>
                    `).join('');
                return;
            }

            const filtered = sampleEngineers.filter(eng => 
                eng.name.toLowerCase().includes(searchTerm) ||
                eng.skills.toLowerCase().includes(searchTerm) ||
                eng.experience.toLowerCase().includes(searchTerm)
            );

            if (filtered.length === 0) {
                resultsDiv.innerHTML = `<p>No engineers found matching "${searchTerm}"</p>`;
            } else {
                resultsDiv.innerHTML = `<p>Found ${filtered.length} engineer(s) matching "${searchTerm}":</p>` + 
                    filtered.map(eng => `
                        <div style="padding: 10px; margin: 5px 0; background: #f0f0f0; border-radius: 4px;">
                            <strong>${eng.name}</strong><br>
                            Skills: ${eng.skills}<br>
                            Experience: ${eng.experience}
                        </div>
                    `).join('');
            }
        }

        function clearSearch() {
            document.getElementById('demo-search').value = '';
            testSearch();
        }

        function runTests() {
            const results = [];
            const statusDiv = document.getElementById('test-status');
            const resultsDiv = document.getElementById('test-results');
            
            statusDiv.className = 'test-result info';
            statusDiv.textContent = 'Running tests...';
            
            // Test 1: Check if search input exists
            const searchInput = document.getElementById('demo-search');
            if (searchInput) {
                results.push({ test: 'Search Input Exists', status: 'pass' });
            } else {
                results.push({ test: 'Search Input Exists', status: 'fail' });
            }

            // Test 2: Test search functionality
            searchInput.value = 'React';
            testSearch();
            const searchResults = document.getElementById('search-results').textContent;
            if (searchResults.includes('2 engineer')) {
                results.push({ test: 'Search Filter Works', status: 'pass' });
            } else {
                results.push({ test: 'Search Filter Works', status: 'fail' });
            }

            // Test 3: Test clear functionality
            clearSearch();
            if (searchInput.value === '' && document.getElementById('search-results').textContent.includes('all engineers')) {
                results.push({ test: 'Clear Search Works', status: 'pass' });
            } else {
                results.push({ test: 'Clear Search Works', status: 'fail' });
            }

            // Display results
            const passed = results.filter(r => r.status === 'pass').length;
            const failed = results.filter(r => r.status === 'fail').length;
            
            statusDiv.className = failed === 0 ? 'test-result success' : 'test-result error';
            statusDiv.textContent = `Tests Complete: ${passed} passed, ${failed} failed`;
            
            resultsDiv.innerHTML = results.map(r => `
                <div class="${r.status === 'pass' ? 'success' : 'error'}" style="padding: 8px; margin: 5px 0; border-radius: 4px;">
                    ${r.status === 'pass' ? '✓' : '✗'} ${r.test}
                </div>
            `).join('');
        }

        function testEnterKey() {
            const searchInput = document.getElementById('demo-search');
            const resultsDiv = document.getElementById('test-results');
            
            searchInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    testSearch();
                    resultsDiv.innerHTML = '<div class="success">✓ Enter key triggers search</div>';
                }
            });
            
            resultsDiv.innerHTML = '<div class="info">Press Enter in the search box to test</div>';
            searchInput.focus();
        }

        function testAutoSearch() {
            const searchInput = document.getElementById('demo-search');
            const resultsDiv = document.getElementById('test-results');
            let timeout;
            
            searchInput.addEventListener('input', function() {
                clearTimeout(timeout);
                resultsDiv.innerHTML = '<div class="info">Typing detected, waiting 500ms...</div>';
                
                timeout = setTimeout(() => {
                    testSearch();
                    resultsDiv.innerHTML = '<div class="success">✓ Auto-search triggered after 500ms</div>';
                }, 500);
            });
            
            resultsDiv.innerHTML = '<div class="info">Type in the search box to test auto-search</div>';
            searchInput.focus();
        }

        function testClearButton() {
            const resultsDiv = document.getElementById('test-results');
            const searchInput = document.getElementById('demo-search');
            
            searchInput.value = 'Test search term';
            clearSearch();
            
            if (searchInput.value === '') {
                resultsDiv.innerHTML = '<div class="success">✓ Clear button works correctly</div>';
            } else {
                resultsDiv.innerHTML = '<div class="error">✗ Clear button failed</div>';
            }
        }

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            testSearch(); // Show all engineers initially
        });
    </script>
</body>
</html>
